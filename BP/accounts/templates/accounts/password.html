{% extends 'base.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/accounts.css' %}">
<link rel="stylesheet" href="{% static 'css/main/style_mydesign.css' %}">
<div class="container-fluid">
    <div class="row flex-nowrap">
        <div class="col-6 bd-sidebar">
            <div class="bd-sidebar-body">
                <ul class="nav">
                    <li><a href="/profiles/mydesign" class="btn btn-lg mt-5" role="button">나의 디자인</a></li>
                    <li><a href="{% url 'accountsapp:detail' user.pk %}" class="btn btn-lg mt-5" role="button">개인 정보 수정</a></li>
                </ul>
            </div>
        </div>
        <div class="profile">
            <div class="card-header">
                <h1>비밀번호 변경</h1>
            </div>
            <div class="card-body">
                <form method="POST" novalidate>
                    {% csrf_token %}
                    <div class="mb-4 md-form">
                        <label name="label_old_password" for="{{ password_change_form.old_password.id_for_label }}"><i
                                class="fas fa-lock"></i>&nbsp;&nbsp;{{ password_change_form.old_password.label }}</label>
                        {{ password_change_form.old_password }}
                        <script type="text/javascript">
                            if (document.getElementsByName('old_password')[0].value != '') {
                                document.getElementsByName('label_old_password')[0].setAttribute('class',
                                    'active');
                            }
                        </script>
                        {% if password_change_form.old_password.errors %}
                        <script type="text/javascript">
                            document.getElementsByName('old_password')[0].setAttribute('class',
                                'form-control is-invalid')
                        </script>
                        {% for error in password_change_form.old_password.errors %}
                        <div class="invalid-feedback" style="margin-bottom:-10px;">
                            {{ error }}
                        </div>
                        {% endfor %}
                        {% endif %}
                    </div>
                    <!--새 비밀번호-->
                    <div class="mb-4 md-form">
                        <label name="label_new_password1" for="{{ password_change_form.new_password1.id_for_label }}"><i
                                class="fas fa-unlock"></i>&nbsp;&nbsp;{{ password_change_form.new_password1.label }}</label>
                        {{ password_change_form.new_password1 }}
                        <script type="text/javascript">
                            if (document.getElementsByName('new_password1')[0].value != '') {
                                document.getElementsByName('label_new_password1')[0].setAttribute('class',
                                    'active');
                            }
                        </script>
                        {% if password_change_form.new_password1.errors %}
                        <script type="text/javascript">
                            document.getElementsByName('new_password1')[0].setAttribute('class',
                                'form-control is-invalid')
                        </script>
                        {% for error in password_change_form.new_password1.errors %}
                        <div class="invalid-feedback" style="margin-bottom:-10px;">
                            {{ error }}
                        </div>
                        {% endfor %}
                        {% endif %}
                    </div>
                    <!--새 비밀번호확인-->
                    <div class="mb-4 md-form">
                        <label name="label_new_password2" for="{{ password_change_form.new_password2.id_for_label }}"><i
                                class="fas fa-unlock-alt"></i>&nbsp;&nbsp;{{ password_change_form.new_password2.label }}</label>
                        {{ password_change_form.new_password2 }}
                        <script type="text/javascript">
                            if (document.getElementsByName('new_password2')[0].value != '') {
                                document.getElementsByName('label_new_password2')[0].setAttribute('class',
                                    'active');
                            }
                        </script>
                        {% if password_change_form.new_password2.errors %}
                        <script type="text/javascript">
                            document.getElementsByName('new_password2')[0].setAttribute('class',
                                'form-control is-invalid')
                        </script>
                        {% for error in password_change_form.new_password2.errors %}
                        <div style="white-space: nowrap;" class="invalid-feedback">
                            {{ error }}
                        </div>
                        {% endfor %}
                        {% endif %}
                        <small style="margin-left: 4px; margin-top:8px; margin-bottom: 30px;" class="form-text text-muted">
                            최소 8개의 숫자와 문자 또는 특수기호를 입력해주세요.
                        </small>
                    </div>
                    <div style="text-align: center; margin: 40px;">
                        <a href="{% url 'accountsapp:detail' user.pk %}" class="btn btn-warning" id="back_btn">돌아가기</a>
                        <button type="submit" class="btn btn-success" id="detail_btn">변경하기</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}